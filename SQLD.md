## 데이터 모델링(Data Modeling)

> 현실세계를 데이터로 표현하기 위해 **추상화**하는 것
>
> 데이터 모델링 표기법 사용

* 특징

  * 추상화

    > 공통적인 특징을 찾고 간략하게 표현

  * 단순화

    > 복잡한 문제를 피하고 누구나 이해할 수 있게 표현

  * 명확성

    > 의미적 해석이 모호하지 않고 명확하게 해석

* 유의점

  * 중복(Duplication)
  * 비유연성(Infiexibility)
  * 비일관성(Inconsistency)

* 단계

  1. 개념적 모델링(Conceptual Data Modeling)

     > 복잡하게 표현하지 않고 **중요한 부분**을 위주로 모델링하는 단계(추상화 수준이 가장 높음)
     >
     > 업무적 관점에서 모델링하며, 기술적인 용어는 가급적 사용하지 않음
     >
     > 개체(Entity)와 속성(Attribute)을 도출하고 개념적 ERD(Entity Relationship Diagram)를 작성

  2. 논리적 모델링(Logical Data Modeling)

     > 식별자를 도출하고 필요한 모든 릴레이션을 정의
     >
     > **정규화를 수행**해서 데이터 모델의 독립성을 확보(재사용성을 높임)

  3. 물리적 모델링(Physical Modeling)

     > 성능, 보안, 가용성을 고려해서 데이터베이스를 실제로 구축하는 단계



#### 개체(Entity)

> 업무에서 관리해야 하는 데이터 집합을 의미

* 특징

  * 식별자

    > 유일한 식별자가 있어야 함

  * 인스턴스 집합

    > 2개 이상의 인스턴스가 있어야 함

  * 속성

    > 반드시 속성을 가지고 있어야 함

  * 관계

    > 다른 엔터티와 최소한 한 개 이상의 관계가 있어야 함

  * 업무

    > 업무에서 관리되어야 하는 집합이어야 함

* 종류

  * 유무형에 따른 종류

    * 유형 엔터티

      > 업무에서 도출되며 지속적으로 사용되는 엔터티

    * 개념 엔터티

      > 유형 엔터티는 물리적 형태가 있지만, 개념 엔터티는 물리적 형태가 없음

    * 사건 엔터티

      > 비즈니스 프로세스를 실행하면서 생성되는 엔터티

  * 발생 시점에 따른 종류

    * 기본 엔터티

      > 키 엔터티라고도 하며, 다른 엔터티로부터 영향을 받지 않고 **독립적으로 생성되는 엔터티**

    * 중심 엔터티

      > 기본 엔터티로부터 발생되고 행위 엔터티를 생성하는 엔터티

    * 행위 엔터티

      > 2개 이상의 엔터티로부터 발생



#### 속성(Attribute)

> 더 이상 분리되지 않는 단위로, 엔터티가 가지는 항목

* 특징

  * 업무에서 관리되는 정보

  * 하나의 값만 가짐

  * 주식별자에게 함수적으로 종속

    > 기본키가 변경되면 속성의 값도 변경

* 종류

  * 분해 여부에 따른 종류

    * 단일 속성

      > 하나의 의미로 구성된 것
      >
      > ex) 이름

    * 복합 속성

      > 여러 개의 의미가 있는 것
      >
      > ex) 주소

    * 다중값 속성

      > 속성에 여러 개의 값을 가질 수 있는 것
      >
      > ex) 상품 리스트

  * 특성에 따른 종류

    * 기본 속성

      > 비즈니스 프로세스에서 도출되는 본래의 속성

    * 설계 속성

      > 데이터 모델링 과정에서 발생되는 속성
      >
      > 유일한 값을 부여

    * 파생 속성

      > 다른 속성에 의해서 만들어지는 속성



#### 관계(Relationship)

> 엔터티 간의 관련성을 의미하며 존재 관계와 행위 관계로 분류

* 종류

  * 존재 관계

    > 엔터티 간의 상태를 의미

  * 행위 관계

    > 엔터티 간의 어떤 행위가 있는 것을 의미
  
* 차수(Relation Cardinality)

  > 두 개의 엔터티 간의 관계에 참여하는 수를 의미

  * 종류

    * 1대1 관계

      * 완전 1대1

        > 하나의 엔터티에 관계되는 엔터티의 관계가 하나인 경우로, 반드시 존재

      * 선택적 1대1

        > 하나의 엔터티에 관계되는 엔터티의 관계가 하나이거나 없을 수도 있음

    * 1대N 관계

      > 엔터티에 행이 하나 있을 때 다른 엔터티의 값이 여러 개 있는 관계

    * M대N 관계

      > 두 개 엔터티가 서로 여러 개의 관계를 가지고 있는 것
      >
      > 관계형 데이터베이스에서 M대N 관계의 조인(Join)은 카테시안 곱이 발생하는데, M대N관계를 1대N, N대1로 해소해야 함

* 식별관계와 비식별관계

  * 식별 관계(Identification Relationship)

    > 어떤 다른 엔터티에게 의존하지 않고 독립적으로 존재할 수 있는 것을 강한 개체(Strong Entity)라고 함
    >
    > 강한 개체의 기본키 값이 변경되면 식별 관계(기본키를 공유받은)에 있는 엔터티의 값도 변경됨

  * 비식별 관계(Non-Identification Relationship)

    > 강한 개체의 기본키를 다른 엔터티의 기본키가 아닌 일반 컬럼으로 관계를 가지는 것



#### 엔터티 식별자(Entity Identifier)

> 엔터티를 대표할 수 있는 유일성을 만족하는 속성

* 키의 종류

  * 기본키(Primary key)

    > 후보키 중에서 엔터티를 대표할 수 있는 키

  * 후보키(Candidate key)

    > 유일성과 최소성을 만족하는 키

  * 슈퍼키(Super key)

    > 유일성은 만족하지만 최소성을 만족하지 않는 키

  * 대체키(Alternate key)

    > 여러 개의 후보키 중에서 기본키를 선정하고 남은 키

  * 외래키(Foreign key)

    > 하나 혹은 다수의 다른 테이블의 기본 키 필드를 가리키는 것으로 참조 무결성을 확인하기 위해서 사용되는 키
    >
    > 허용된 데이터 값만 데이터베이스에 저장하기 위해 사용

* 종류

  * 대표성 여부에 따른 종류

    * 주식별자(기본키, Primary key)

      > 유일성과 최소성을 만족하면서 엔터티를 대표하는 식별자
      >
      > 다른 엔터티와 참조 관계로 연결될 수 있음

      * 최소성

        > 최소성을 만족하는 키

      * 대표성

        > 엔터티를 대표할 수 있어야 함

      * 유일성

        > 엔터티의 인스턴스를 유일하게 식별해야 함

      * 불변성

        > 자주 변경되지 않아야 함

    * 보조 식별자

      > 유일성과 최소성은 만족하지만 대표성을 만족하지 못하는 식별자

  * 생성 여부에 따른 종류

    * 내부 식별자

      > 엔터티 내부에서 스스로 생성되는 식별자

    * 외부 식별자

      > 다른 엔터티와의 관계로 인하여 만들어지는 식별자

  * 속성의 수에 따른 종류

    * 단일 식별자

      > 하나의 속성으로 구성

    * 복합 식별자

      > 두 개 이상의 속성으로 구성

  * 대체 여부에 따른 종류

    * 본질 식별자

      > 비즈니스 프로세스에서 만들어지는 식별자

    * 인조 식별자

      > 인위적으로 만들어지는 식별자
      >
      > 후보 식별자 중에서 주식별자로 선정할 것이 없거나 주식별자가 너무 많은 컬럼으로 되어 있는 경우에 사용



#### ERD(Entity Relationship Diagram)

> 개체 간의 관계를 정의하는 모델링 방법

* 절차

  1. 개체(Entity)를 도출하고 그림

     > 업무에서 관리해야 하는 집합을 도출

  2. 개체(Entity)를 배치함

     > **중요한 개체(Entity)를 왼쪽 상단에 배치**

  3. 개체(Entity) 간의 관계를 설정

  4. 관계명을 서술

     > 개체(Entity) 간의 어떤 행위나 존재가 있는지 표현

  5. 관계 참여도를 표현

     > 관계 참여도는 한 개의 개체(Entity)와 다른 개체(Entity) 간의 참여하는 관계 수를 의미

  6. 관계의 필수 여부를 표현

     > 반드시 존재해야하는 것은 아님



#### 3층 스키마(3-Level Schema)

> 사용자, 설계자, 개발자가 데이터베이스를 보는 관점에 따라 데이터베이스를 기술하고 이들 간의 관계를 정의한 ANSI 표준
>
> 데이터베이스의 독립성을 확보하기 위한 방법

* 독립성

  * 논리적 독립성

    > 개념 스키마 변경되더라고 외부 스키마는 영향 받지 않음

  * 물리적 독립성

    > 내부 스키마가 변경되더라도 개념 스키마는 영향 받지 않음

* 장점

  > 데이터 중복 제거
  >
  > 사용자 요구사항 변경에 따른 대응력 향상
  >
  > 관리 및 유지보수 비용절감

* 단점

  > 데이터 복잡도 증가

* 구조

  * 외부 단계

    * 외부 스키마

      > 사용자 관점, 업무상 관련이 있는 데이터 접근
      >
      > 응용 프로그램이 접근하는 데이터베이스를 정의

  * 개념 단계

    * 개념 스키마

      > 설계자 관점, 사용자 전체 집단의 데이터베이스 구조
      >
      > 전체 데이터베이스 내의 규칙과 구조를 표현
      >
      > 통합 데이터베이스 구조

  * 내부 단계

    * 내부 스키마

      > 개발자 관점, 데이터베이스의 물리적 저장 구조
      >
      > 데이터 저장 구조, 레코드 구조, 필드 정의, 인덱스 등을 의미



## 데이터 모델과 성능

#### 정규화(Normalization)

> 데이터의 일관성, 최소한의 데이터 중복, 최대한의 데이터 유연성을 위한 방법이며 데이터를 분해하는 과정

* 정규화 절차

  * 제1정규화

    > 속성(Attribute)의 원자성을 확보
    >
    > 기본키를 설정

  * 제2정규화

    > 기본키가 2개 이상의 속성으로 이루어진 경우, 부분 함수 종속성을 제거

  * 제3정규화

    > 기본키를 제외한 컬럼 간에 종속성(이행 함수 종속성)을 제거

  * BCNF

    > 기본키를 제외하고 후보키가 있는 경우, 후보키가 기본키를 종속시키면 분해

  * 제4정규화

    > 여러 컬럼들이 하나의 컬럼을 종속시키는 경우 분해하여 다중값 종속성을 제거

  * 제5정규화

    > 조인에 의해서 종속성이 발생되는 경우 분해